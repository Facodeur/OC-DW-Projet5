"use strict";var contenuePanier=document.getElementById("stock-panier"),prixTotalPanier=0;function displayPanier(){prixTotalPanier=0,contenuePanier.innerHTML='<div class="border-bottom mb-4">\n        <h4 class="col-4 font-weight-bold">Votre panier</h4>\n    </div>';var e=getPanier(),n=!0,a=!1,t=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var r=o.value,d=r.prix/100,c=d*r.count;prixTotalPanier+=c;var l='<div class="row border-bottom mb-4">\n                    <div class="col-md-3">\n                            <img id="image" src="'.concat(r.img,'" class="card-img mb-3" alt="photo ').concat(r.name,'">\n                    </div>\n                    <div class="col-md-3">\n                        <h5 class="card-title">').concat(r.name,'</h5>\n                        <p class="card-text">').concat(r.vernis,'</p>\n                        <p class="card-text">').concat(d.toFixed(2),'€</p>\n                    </div>\n                    <div class="d-flex flex-row">\n                        <span onclick="pushOneItem(event.currentTarget)" data-id="').concat(r.id,'" data-vernis="').concat(r.vernis,'" aria-label="ajoute"><i class="fas fa-plus-circle"></i></span>\n                        <p class="card-text">').concat(r.count,'</p>\n                        <span onclick="removeOneItem(event.currentTarget)" data-id="').concat(r.id,'" data-vernis="').concat(r.vernis,'" aria-label="diminu"><i class="fas fa-minus-circle"></i></span>\n                    </div>\n                    <div class="col-md-2">\n                        <p class="card-text prix-total">').concat(c,' €</p>\n                        <button onclick="removeItem(event.currentTarget)" data-id="').concat(r.id,'" data-vernis="').concat(r.vernis,'" type="button" class="close" aria-label="Close">\n                            <i class="fas fa-trash-alt"></i>\n                        </button>\n                    </div>\n                </div>');contenuePanier.innerHTML+=l}}catch(e){a=!0,t=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw t}}checkPanierVide(),displayPrixTotal(),showTotalInPanier()}function removeItem(e){var n=getPanier(),a=e.dataset.id,t=e.dataset.vernis,o=n.filter(function(e){if(e.id!=a||e.vernis!=t)return!0});savePanier(o),displayPanier()}function displayPrixTotal(){var e=document.querySelector(".prix"),n=document.querySelector(".total-prix");e.textContent=prixTotalPanier+"€",n.textContent=prixTotalPanier+"€",console.log(prixTotalPanier)}function checkPanierVide(){0===prixTotalPanier&&(contenuePanier.innerHTML='<div class="text-center">\n            <h2>Votre panier est vide</h2>\n        </div>',document.getElementById("total-form").classList.add("d-none"),localStorage.removeItem("panier"))}function pushOneItem(e){addOrRemoveOneItem(e,!0)}function removeOneItem(e){addOrRemoveOneItem(e,!1)}function addOrRemoveOneItem(e,n){var a=getPanier(),t=e.dataset.id,o=e.dataset.vernis,i=!0,r=!1,d=void 0;try{for(var c,l=a[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)panierItem=c.value,panierItem.id==t&&panierItem.vernis==o&&(n?panierItem.count++:1<panierItem.count&&panierItem.count--)}catch(e){r=!0,d=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw d}}savePanier(a),displayPanier()}displayPanier();var formCommand=document.getElementById("form"),btnCommand=document.getElementById("command");btnCommand.addEventListener("click",function(){formCommand.classList.remove("d-none"),btnCommand.classList.add("d-none")});var panier=getPanier(),products=[];panier.forEach(function(e){products.push(e.id),console.log("dans le forEach",e.id)}),console.log("produits = ",products);var form=document.getElementById("form-command"),btnValidCommand=document.getElementById("btn-valid-command");btnValidCommand.addEventListener("click",submitOrder),btnValidCommand.addEventListener("click",modalConfirm);var options={method:"POST",body:JSON.stringify({contact:{firstName:form.firstName.value,lastName:form.lastName.value,address:form.address.value,city:form.city.value,email:form.email.value},products:products}),headers:{"Content-type":"application/json; charset=UTF-8"}};function submitOrder(e){e.preventDefault(),fetch("http://localhost:3000/api/furniture/order",options).then(function(e){return e.ok?e.json():Promise.reject(e.status)}).then(function(e){console.log(e)}).catch(function(e){return console.log("Erreur message : ".concat(e))})}function modalConfirm(){document.querySelector(".container").innerHTML='\n    \x3c!-- Modal --\x3e\n    <div class="modal fade" id="modalConfirm" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">\n      <div class="modal-dialog modal-dialog-centered" role="document">\n        <div class="modal-content">\n          <div class="modal-header">\n            <h5 class="modal-title" id="exampleModalLongTitle">Confirmation de commande</h5>\n            <p>Commande n° 402-3269817-2310705</p>\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n              <span aria-hidden="true">&times;</span>\n            </button>\n          </div>\n          <div class="modal-body">\n          Nous vous remercions de votre commande. Nous vous tiendrons informé par e-mail \n          lorsque les articles de votre commande auront été expédiés. Votre date de livraison \n          estimée est indiquée ci-dessous. Vous pouvez suivre l’état de votre commande\n          ou modifier celle-ci dans Vos commandes sur Amazon.fr. \n          </div>\n          <div class="modal-footer">\n            <button onclick="pageAccueil()" type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n          </div>\n        </div>\n      </div>\n    </div>\n    '}function pageAccueil(){document.location.href="index.html"}console.log("jarrive ici",prixTotalPanier);